"use strict";exports.id=677,exports.ids=[677],exports.modules={9848:(t,e,r)=>{r.d(e,{HI:()=>encrypt,NH:()=>generateNonce,pe:()=>decrypt});var a=r(6543),n=r.n(a);let o="38b1e8b223529fc69deef91148a176c0";if(!o||32!==o.length)throw Error("ENCRYPTION_KEY must be exactly 32 characters");function encrypt(t){return n().AES.encrypt(t,o).toString()}function decrypt(t){let e=n().AES.decrypt(t,o);return e.toString(n().enc.Utf8)}function generateNonce(){return n().lib.WordArray.random(16).toString()}},7677:(t,e,r)=>{r.d(e,{a2:()=>updateVariantPrice,cz:()=>createOAuthUrl,kL:()=>validateWebhookHmac,t2:()=>fetchProducts});var a=r(9848);async function fetchProducts(t,e){let r=await fetch(`https://${e}/admin/api/2023-10/products.json?limit=250`,{headers:{"X-Shopify-Access-Token":(0,a.pe)(t),"Content-Type":"application/json"}});if(!r.ok)throw Error(`Failed to fetch products: ${r.statusText}`);return await r.json()}async function updateVariantPrice(t,e,r,n){let o=await fetch(`https://${e}/admin/api/2023-10/variants/${r}.json`,{method:"PUT",headers:{"X-Shopify-Access-Token":(0,a.pe)(t),"Content-Type":"application/json"},body:JSON.stringify({variant:{id:r,price:n}})});if(!o.ok)throw Error(`Failed to update variant: ${o.statusText}`);return await o.json()}function createOAuthUrl(t,e){let r=new URL(`https://${t}/admin/oauth/authorize`);return r.searchParams.set("client_id","your_shopify_api_key_here"),r.searchParams.set("scope","read_products,write_products,read_orders,read_price_rules"),r.searchParams.set("redirect_uri","https://your-app-name.vercel.app/api/auth/shopify/callback"),r.searchParams.set("state",e),r.toString()}async function validateWebhookHmac(t,e){try{let r=new TextEncoder,a=r.encode("your_shopify_api_secret_here"),n=r.encode(t),o=await crypto.subtle.importKey("raw",a,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),i=await crypto.subtle.sign("HMAC",o,n),c=btoa(String.fromCharCode(...new Uint8Array(i)));return c===e}catch(t){return!1}}}};