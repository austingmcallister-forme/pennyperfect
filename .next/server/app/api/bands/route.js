"use strict";(()=>{var e={};e.id=967,e.ids=[967],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2977:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>b,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>_});var n={};t.r(n),t.d(n,{GET:()=>GET,POST:()=>POST});var a=t(884),o=t(6132),s=t(5798),i=t(7542),u=t(1538),d=t(1045);let l=u.Ry({name:u.Z_().min(1),minCents:u.Rx().min(0),maxCents:u.Rx().min(0),allowedEndings:u.IX(u.Rx()).min(1),floorCents:u.Rx().optional(),excludeCollections:u.IX(u.Z_()).optional(),excludeSkus:u.IX(u.Z_()).optional()});async function GET(e){let{searchParams:r}=new URL(e.url),t=r.get("shop");if(!t)return s.Z.json({error:"Shop parameter is required"},{status:400});try{let e=await i._.shop.findUnique({where:{domain:t},include:{bands:{include:{experiments:{where:{status:"running"}}}}}});if(!e)return s.Z.json({error:"Shop not found"},{status:404});return s.Z.json(e.bands)}catch(e){return console.error("Error fetching bands:",e),s.Z.json({error:"Failed to fetch bands"},{status:500})}}async function POST(e){let{searchParams:r}=new URL(e.url),t=r.get("shop");if(!t)return s.Z.json({error:"Shop parameter is required"},{status:400});try{let r=await i._.shop.findUnique({where:{domain:t}});if(!r)return s.Z.json({error:"Shop not found"},{status:404});let n=await e.json(),a=l.parse(n),o=await i._.priceBand.create({data:{shopId:r.id,...a}});return s.Z.json(o)}catch(e){if(e instanceof d.jm)return s.Z.json({error:"Invalid data",details:e.errors},{status:400});return console.error("Error creating band:",e),s.Z.json({error:"Failed to create band"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/bands/route",pathname:"/api/bands",filename:"route",bundlePath:"app/api/bands/route"},resolvedPagePath:"/Users/austinmcallister/pennyperfect/src/app/api/bands/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:h,headerHooks:f,staticGenerationBailout:_}=p,b="/api/bands/route"},7542:(e,r,t)=>{t.d(r,{_:()=>o});let n=require("@prisma/client"),a=globalThis,o=a.prisma??new n.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[997,538],()=>__webpack_exec__(2977));module.exports=t})();