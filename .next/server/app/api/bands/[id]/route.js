"use strict";(()=>{var e={};e.id=739,e.ids=[739],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9653:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>E,originalPathname:()=>f,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>_,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>b});var n={};t.r(n),t.d(n,{DELETE:()=>DELETE,GET:()=>GET,PUT:()=>PUT});var a=t(884),i=t(6132),o=t(5798),s=t(7542),d=t(1538),u=t(1045);let l=d.Ry({name:d.Z_().min(1).optional(),minCents:d.Rx().min(0).optional(),maxCents:d.Rx().min(0).optional(),allowedEndings:d.IX(d.Rx()).min(1).optional(),floorCents:d.Rx().optional(),excludeCollections:d.IX(d.Z_()).optional(),excludeSkus:d.IX(d.Z_()).optional(),active:d.O7().optional()});async function GET(e,{params:r}){try{let e=await s._.priceBand.findUnique({where:{id:r.id},include:{experiments:{include:{periods:{orderBy:{startedAt:"desc"}}}}}});if(!e)return o.Z.json({error:"Band not found"},{status:404});return o.Z.json(e)}catch(e){return console.error("Error fetching band:",e),o.Z.json({error:"Failed to fetch band"},{status:500})}}async function PUT(e,{params:r}){try{let t=await e.json(),n=l.parse(t),a=await s._.priceBand.update({where:{id:r.id},data:n});return o.Z.json(a)}catch(e){if(e instanceof u.jm)return o.Z.json({error:"Invalid data",details:e.errors},{status:400});return console.error("Error updating band:",e),o.Z.json({error:"Failed to update band"},{status:500})}}async function DELETE(e,{params:r}){try{return await s._.priceBand.delete({where:{id:r.id}}),o.Z.json({message:"Band deleted successfully"})}catch(e){return console.error("Error deleting band:",e),o.Z.json({error:"Failed to delete band"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/bands/[id]/route",pathname:"/api/bands/[id]",filename:"route",bundlePath:"app/api/bands/[id]/route"},resolvedPagePath:"/Users/austinmcallister/pennyperfect/src/app/api/bands/[id]/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:_,headerHooks:E,staticGenerationBailout:b}=c,f="/api/bands/[id]/route"},7542:(e,r,t)=>{t.d(r,{_:()=>i});let n=require("@prisma/client"),a=globalThis,i=a.prisma??new n.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[997,538],()=>__webpack_exec__(9653));module.exports=t})();